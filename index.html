<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SPY–HYG Divergence</title>
  <link rel="stylesheet" href="styles.css">
  <meta name="description" content="Simple SPY–HYG divergence signal computed client-side from JSON time-series built by GitHub Actions." />
</head>
<body>
  <div class="card">
    <h1>SPY ↔ HYG Divergence</h1>
    <div class="muted" id="meta">Loading data…</div>

    <div class="row">
      <div class="pill">
        <div class="muted">Lookback Period</div>
        <div>
          <select id="lookbackSelect" style="background:#17181b;color:#e9e9ea;border:1px solid #333;padding:6px 8px;border-radius:6px;font-size:14px;cursor:pointer">
            <option value="20" selected>20 days</option>
            <option value="50">50 days</option>
            <option value="100">100 days</option>
          </select>
        </div>
      </div>
      <div class="pill"><div class="muted">SPY Trend</div><div><code id="spySlope"></code></div></div>
      <div class="pill"><div class="muted">HYG Trend</div><div><code id="hygSlope"></code></div></div>
    </div>

    <div class="signal" id="signal"></div>
    <div class="muted" style="margin-top:10px">
      Divergence definition: <b>Bearish divergence</b> occurs when SPY makes <b>higher highs</b> while HYG makes <b>lower highs</b>.
      <b>Bullish divergence</b> occurs when SPY makes <b>lower lows</b> while HYG makes <b>higher lows</b>.
      Trend determined by the slope of the line connecting the two most recent swing highs.
    </div>
  </div>

  <div class="card" style="margin-top:18px">
    <h2 style="font-size:16px;margin:0 0 12px">SPY Price Chart</h2>
    <div id="chartSpy" style="width:100%;height:200px"></div>
  </div>

  <div class="card" style="margin-top:18px">
    <h2 style="font-size:16px;margin:0 0 12px">HYG Price Chart</h2>
    <div id="chartHyg" style="width:100%;height:200px"></div>
  </div>

  <div class="card" style="margin-top:18px">
    <h2 style="font-size:16px;margin:0 0 12px">SPY/HYG Ratio</h2>
    <div id="chartRatio" style="width:100%;height:200px"></div>
  </div>

  <div class="card" style="margin-top:18px">
    <h2 style="font-size:16px;margin:0 0 10px">Swing High Detection Logic</h2>
    <div class="muted" style="font-size:13px;line-height:1.7">
      <b>1. Identify swing highs:</b> A bar is a swing high if its price is higher than all neighboring bars within a scaled window (20 days = 2 bars each side, 50 days = 5 bars, 100 days = 10 bars)
      <br><br>
      <b>2. Scan all bars:</b> Iterate through every bar in the lookback period to find all swing highs
      <br><br>
      <b>3. Select top 2 by price:</b> Sort all identified swing highs by price (descending) and take the 2 highest
      <br><br>
      <b>4. Calculate trend:</b> Connect the 2 swing highs chronologically. If second > first = "Higher Highs ↗", if second < first = "Lower Highs ↘"
      <br><br>
      <b>5. Divergence:</b> Occurs when SPY and HYG trends move in opposite directions (e.g., SPY higher highs + HYG lower highs = bearish divergence)
    </div>
  </div>

  <div class="card" style="margin-top:18px">
    <div class="muted" style="text-align:center;font-size:12px">
      Data provided by <a href="https://stooq.com" target="_blank" rel="noopener" style="color:#7aa2f7;text-decoration:none">Stooq</a>
      · Inspired by <a href="https://tradebrigade.co" target="_blank" rel="noopener" style="color:#7aa2f7;text-decoration:none">Trade Brigade</a>
      · Vibe-coded with <a href="https://claude.ai/code" target="_blank" rel="noopener" style="color:#7aa2f7;text-decoration:none">Claude Code</a>
    </div>
  </div>

<script src="app.js"></script>
</body>
</html>
