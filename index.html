<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SPY–HYG Divergence</title>
  <link rel="stylesheet" href="styles.css">
  <meta name="description" content="Simple SPY–HYG divergence signal computed client-side from JSON time-series built by GitHub Actions." />
</head>
<body>
  <!-- Top Section: Lookback & Divergence Explanation -->
  <div class="card">
    <div style="display:flex;align-items:center;gap:16px">
      <div>
        <h1 style="margin:0 0 4px 0">Divergence Dashboard</h1>
        <div class="muted" id="meta">Loading data…</div>
      </div>
      <div class="pill">
        <div class="muted">Lookback Period</div>
        <div>
          <select id="lookbackSelect" style="background:#17181b;color:#e9e9ea;border:1px solid #333;padding:6px 8px;border-radius:6px;font-size:14px;cursor:pointer">
            <option value="20" selected>20 days</option>
            <option value="50">50 days</option>
            <option value="100">100 days</option>
          </select>
        </div>
      </div>
      <div class="pill">
        <div class="muted">Pivot Selection</div>
        <div>
          <select id="pivotModeSelect" style="background:#17181b;color:#e9e9ea;border:1px solid #333;padding:6px 8px;border-radius:6px;font-size:14px;cursor:pointer">
            <option value="highest">2 Highest by Price</option>
            <option value="recent" selected>Last 2 Chronologically</option>
            <option value="highest-to-current">HH → Last Close</option>
          </select>
        </div>
      </div>
      <div class="pill">
        <div class="muted">Swing Window</div>
        <div>
          <select id="barsSelect" style="background:#17181b;color:#e9e9ea;border:1px solid #333;padding:6px 8px;border-radius:6px;font-size:14px;cursor:pointer">
            <option value="auto" selected>Auto-scale</option>
            <option value="2">2 days</option>
            <option value="3">3 days</option>
            <option value="5">5 days</option>
            <option value="7">7 days</option>
            <option value="10">10 days</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Divergence Pairs Columns (dynamically generated from app.js PAIRS config) -->
  <div class="pairs-container">
    <!-- Pair columns will be generated here by JavaScript -->
  </div>

  <!--
  <div class="card" style="margin-top:18px">
    <h2 style="font-size:16px;margin:0 0 10px">Swing High Detection Logic</h2>
    <div class="muted" style="font-size:13px;line-height:1.7">
      • <b>Find swing highs:</b> Identify all local peaks in the price chart where price is higher than surrounding days<br>
      • <b>Select the 2 highest:</b> Sort all peaks by price and take the top 2 highest (shown as gold dots on charts)<br>
      • <b>Draw trend line:</b> Connect the 2 highest peaks chronologically. If the line slopes up = "Higher Highs ↗", down = "Lower Highs ↘"<br>
      • <b>Detect divergence:</b> When one asset's trend line goes up while another's goes down<br>
      <br>
  -->
  <div class="card" style="margin-top:18px">
    <div class="muted" style="font-size:13px;line-height:1.7">
      <b>Bearish divergence:</b> SPY makes higher highs while HYG makes lower highs (risk-off warning)<br>
      <b>Bullish divergence:</b> SPY makes lower highs while HYG makes higher highs (potential reversal)<br>
      <b>Aligned:</b> Both assets trending in the same direction (confirmation)
    </div>
  </div>
  <!--
    </div>
  </div>
  -->

  <div class="card" style="margin-top:18px">
    <div class="muted" style="text-align:center;font-size:12px">
      Data provided by <a href="https://finance.yahoo.com" target="_blank" rel="noopener" style="color:#7aa2f7;text-decoration:none">Yahoo Finance</a> via <a href="https://github.com/ranaroussi/yfinance" target="_blank" rel="noopener" style="color:#7aa2f7;text-decoration:none">yfinance</a>
      · Inspired by <a href="https://tradebrigade.co" target="_blank" rel="noopener" style="color:#7aa2f7;text-decoration:none">Trade Brigade</a>
      · Hosted on <a href="https://pages.github.com" target="_blank" rel="noopener" style="color:#7aa2f7;text-decoration:none">GitHub Pages</a>
      · Hourly + daily data fetched via <a href="https://github.com/features/actions" target="_blank" rel="noopener" style="color:#7aa2f7;text-decoration:none">GitHub Actions</a>
      · Vibe-coded with <a href="https://claude.ai/code" target="_blank" rel="noopener" style="color:#7aa2f7;text-decoration:none">Claude Code</a>
      · <a href="https://github.com/jonsflow/risk-divergence" target="_blank" rel="noopener" style="color:#7aa2f7;text-decoration:none">GitHub Repo</a>
    </div>
  </div>

<script src="app.js"></script>
</body>
</html>
